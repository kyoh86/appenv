// Code generated by github.com/kyoh86/appenv.Generator DO NOT EDIT.

package out

import (
	"io"

	keyring "github.com/99designs/keyring"
)

func GetAppenv(yamlReader io.Reader, keyringConfig *keyring.Config, envarPrefix string) (config Config, access Access, err error) {
	yml, err := loadYAML(yamlReader)
	if err != nil {
		return config, access, err
	}
	keyring, err := loadKeyring(keyringConfig)
	if err != nil {
		return config, access, err
	}
	config, err = buildConfig(yml, keyring)
	if err != nil {
		return config, access, err
	}
	access, err = buildAccess(yml, keyring, envarPrefix)
	if err != nil {
		return config, access, err
	}
	return config, access, nil
}
